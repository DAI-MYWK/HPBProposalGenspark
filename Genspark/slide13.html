<!DOCTYPE html>

<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>商圏ポジショニングマップ（広域）</title>
    <link
      href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css"
      rel="stylesheet"
    />
    <link href="https://fonts.googleapis.com" rel="preconnect" />
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect" />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700;900&amp;display=swap"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
      body {
        font-family: "Noto Sans JP", sans-serif;
        margin: 0;
        padding: 0;
        background-color: #f3f4f6;
        width: 1280px;
        height: 720px;
        overflow: hidden;
      }
      .text-hpb-orange {
        color: #ff6b35;
      }
      .bg-hpb-orange {
        background-color: #ff6b35;
      }
      .border-hpb-orange {
        border-color: #ff6b35;
      }

      .slide-container {
        width: 1280px;
        height: 720px;
        display: flex;
        flex-direction: column;
        background-color: white;
        position: relative;
      }

      /* Chart Background Grid */
      .chart-bg-grid {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 0;
        display: grid;
        grid-template-columns: 1fr 1fr 1fr;
        grid-template-rows: 1fr 1fr;
      }

      .chart-bg-label {
        position: absolute;
        font-weight: 900;
        font-size: 4rem;
        color: #f3f4f6;
        z-index: 0;
        pointer-events: none;
        user-select: none;
        line-height: 1;
      }

      .opportunity-zone {
        position: absolute;
        border: 2px dashed #06b6d4;
        background-color: rgba(6, 182, 212, 0.05);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 1;
        /* Positioning is approximate relative to chart canvas */
        left: 35%;
        top: 30%;
        width: 25%;
        height: 30%;
      }

      .opportunity-label {
        background-color: #06b6d4;
        color: white;
        padding: 4px 12px;
        border-radius: 20px;
        font-size: 0.75rem;
        font-weight: 700;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        text-align: center;
      }
    </style>
  </head>
  <body>
    <div class="slide-container">
      <!-- Header -->
      <div
        class="h-20 flex items-center justify-between px-16 border-b border-gray-100 bg-white z-20"
      >
        <div class="flex items-center space-x-2">
          <div
            class="bg-gray-800 w-8 h-8 rounded-md flex items-center justify-center text-white"
          >
            <i class="fas fa-globe text-sm"></i>
          </div>
          <p class="text-gray-500 font-bold text-sm tracking-wider">
            AREA POSITIONING MAP
          </p>
        </div>
        <div class="flex items-center">
          <span
            class="bg-blue-600 text-white px-3 py-1 rounded text-xs font-bold mr-2"
            >Market Overview</span
          >
          <p class="text-gray-400 text-sm">商圏エリア別ポジショニング</p>
        </div>
      </div>
      <!-- Main Content -->
      <div class="flex-1 flex px-16 py-8 gap-8 overflow-hidden bg-white">
        <!-- Left: Chart Area -->
        <div
          class="w-3/4 relative rounded-2xl border border-gray-200 bg-gray-50 overflow-hidden h-full flex flex-col"
        >
          <div class="absolute top-4 left-4 z-10">
            <h3 class="text-lg font-bold text-gray-800">
              広域ポジショニングマップ
            </h3>
            <p class="text-xs text-gray-500">
              渋谷・代官山・銀座の主要サロン分布
            </p>
          </div>
          <!-- Background Labels -->
          <div class="chart-bg-label bottom-4 left-4 text-gray-200">
            Casual / Trend
          </div>
          <div class="chart-bg-label top-4 right-4 text-gray-200 text-right">
            Luxury / Quality
          </div>
          <!-- Opportunity Overlay -->
          <div class="opportunity-zone animate-pulse">
            <div class="opportunity-label">
              <i class="fas fa-star mr-1"></i>Next Blue Ocean
            </div>
          </div>
          <!-- Chart Container -->
          <div class="relative w-full h-full p-8 z-10 mt-4">
            <canvas id="areaPositioningChart"></canvas>
            <!-- Axis Labels -->
            <div
              class="absolute bottom-2 right-4 text-xs font-bold text-gray-400 bg-white px-2 rounded"
            >
              平均客単価 (High) →
            </div>
            <div
              class="absolute bottom-2 left-4 text-xs font-bold text-gray-400 bg-white px-2 rounded"
            >
              ← 平均客単価 (Low)
            </div>
            <div
              class="absolute top-8 left-0 text-xs font-bold text-gray-400 bg-white px-2 rounded transform -rotate-90 origin-top-left"
            >
              ↑ ラグジュアリー・品質重視
            </div>
            <div
              class="absolute bottom-16 left-0 text-xs font-bold text-gray-400 bg-white px-2 rounded transform -rotate-90 origin-top-left"
            >
              ↓ カジュアル・トレンド重視
            </div>
          </div>
        </div>
        <!-- Right: Insight Panel -->
        <div class="w-1/4 flex flex-col justify-between h-full py-1">
          <div>
            <h2 class="text-xl font-bold text-gray-800 mb-4 leading-tight">
              <span class="text-hpb-orange">Siena</span>は<br />
              「独自の山」を築けるか
            </h2>
            <div class="space-y-4">
              <!-- Legend: Shibuya -->
              <div
                class="bg-orange-50 p-3 rounded-lg border-l-4 border-hpb-orange"
              >
                <div class="flex items-center mb-1">
                  <div class="w-3 h-3 rounded-full bg-hpb-orange mr-2"></div>
                  <p class="text-sm font-bold text-gray-800">渋谷エリア</p>
                </div>
                <p class="text-xs text-gray-600">低〜中単価 × トレンド重視</p>
                <p class="text-[10px] text-gray-500 mt-1">
                  学生・若年層が中心。回転率とデザイン性が鍵。
                </p>
              </div>
              <!-- Legend: Daikanyama -->
              <div
                class="bg-emerald-50 p-3 rounded-lg border-l-4 border-emerald-500"
              >
                <div class="flex items-center mb-1">
                  <div class="w-3 h-3 rounded-full bg-emerald-500 mr-2"></div>
                  <p class="text-sm font-bold text-gray-800">代官山エリア</p>
                </div>
                <p class="text-xs text-gray-600">中〜高単価 × 世界観重視</p>
                <p class="text-[10px] text-gray-500 mt-1">
                  デザイン感度が高い層。顧客ロイヤリティが高い。
                </p>
              </div>
              <!-- Legend: Ginza -->
              <div class="bg-blue-50 p-3 rounded-lg border-l-4 border-blue-600">
                <div class="flex items-center mb-1">
                  <div class="w-3 h-3 rounded-full bg-blue-600 mr-2"></div>
                  <p class="text-sm font-bold text-gray-800">銀座エリア</p>
                </div>
                <p class="text-xs text-gray-600">高単価 × 品質・接客重視</p>
                <p class="text-[10px] text-gray-500 mt-1">
                  大人女性・富裕層。髪質改善やエイジングケア。
                </p>
              </div>
            </div>
          </div>
          <!-- Strategic Insight -->
          <div
            class="bg-white border border-gray-200 rounded-xl p-4 shadow-sm relative overflow-hidden"
          >
            <div
              class="absolute top-0 right-0 w-16 h-16 bg-cyan-100 rounded-bl-full -mr-8 -mt-8"
            ></div>
            <div class="relative z-10">
              <p class="text-xs font-bold text-cyan-600 uppercase mb-2">
                <i class="fas fa-search-plus mr-1"></i>Opportunity
              </p>
              <p class="text-sm font-bold text-gray-800 leading-snug mb-2">
                「中単価 × 高品質」の<br />空白地帯へ
              </p>
              <p class="text-xs text-gray-600 leading-relaxed">
                渋谷の気軽さを残しつつ、銀座レベルの「髪質改善」を取り入れることで、<strong
                  class="text-cyan-600 bg-cyan-50 px-1"
                  >単価UPと客層拡大</strong
                >を同時に実現できるポテンシャルがあります。
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script>
      const ctx = document
        .getElementById("areaPositioningChart")
        .getContext("2d");

      // Data format: x: Price, y: Luxury/Quality Score (0-100), r: Scale
      // Y-axis: 0 = Casual/Trend, 100 = Luxury/Quality

      const data = {
        datasets: [
          {
            label: "Siena 渋谷 (現在)",
            data: [{ x: 6500, y: 35, r: 25 }],
            backgroundColor: "#FF6B35",
            borderColor: "#ffffff",
            borderWidth: 4,
            hoverBackgroundColor: "#FF6B35",
            hoverBorderWidth: 6,
            order: 1,
          },
          {
            label: "Siena 渋谷 (狙い)",
            data: [{ x: 9500, y: 60, r: 15 }], // Shift towards higher price/quality
            backgroundColor: "rgba(255, 255, 255, 0)",
            borderColor: "#FF6B35",
            borderWidth: 2,
            borderDash: [5, 5],
            pointStyle: "circle",
            order: 1,
          },
          {
            label: "渋谷競合群",
            data: [
              { x: 5000, y: 20, r: 15 },
              { x: 4500, y: 15, r: 12 },
              { x: 7500, y: 30, r: 18 },
              { x: 8000, y: 25, r: 10 },
              { x: 6000, y: 20, r: 20 },
            ],
            backgroundColor: "rgba(255, 107, 53, 0.3)", // Light Orange
            borderColor: "#FF6B35",
            borderWidth: 1,
            order: 2,
          },
          {
            label: "代官山競合群",
            data: [
              { x: 9000, y: 55, r: 12 },
              { x: 11000, y: 65, r: 15 },
              { x: 13000, y: 70, r: 10 },
              { x: 8500, y: 50, r: 10 },
            ],
            backgroundColor: "rgba(16, 185, 129, 0.3)", // Light Emerald
            borderColor: "#10b981",
            borderWidth: 1,
            order: 2,
          },
          {
            label: "銀座競合群",
            data: [
              { x: 15000, y: 85, r: 15 },
              { x: 20000, y: 90, r: 12 },
              { x: 13000, y: 80, r: 18 },
              { x: 25000, y: 95, r: 10 },
              { x: 12000, y: 75, r: 14 },
            ],
            backgroundColor: "rgba(37, 99, 235, 0.3)", // Light Blue
            borderColor: "#2563eb",
            borderWidth: 1,
            order: 2,
          },
        ],
      };

      // Arrow plugin to draw arrow from Current to Target Siena
      const arrowPlugin = {
        id: "arrowPlugin",
        afterDraw: (chart) => {
          const ctx = chart.ctx;
          const xAxis = chart.scales.x;
          const yAxis = chart.scales.y;

          // Coordinates
          const startX = xAxis.getPixelForValue(6500);
          const startY = yAxis.getPixelForValue(35); // Siena Current
          const endX = xAxis.getPixelForValue(9500);
          const endY = yAxis.getPixelForValue(60); // Siena Target

          // Draw Arrow
          ctx.save();
          ctx.beginPath();
          ctx.moveTo(startX, startY);
          ctx.lineTo(endX, endY);
          ctx.strokeStyle = "#FF6B35";
          ctx.lineWidth = 2;
          ctx.setLineDash([5, 5]);
          ctx.stroke();

          // Arrowhead
          const angle = Math.atan2(endY - startY, endX - startX);
          ctx.beginPath();
          ctx.moveTo(endX, endY);
          ctx.lineTo(
            endX - 10 * Math.cos(angle - Math.PI / 6),
            endY - 10 * Math.sin(angle - Math.PI / 6)
          );
          ctx.lineTo(
            endX - 10 * Math.cos(angle + Math.PI / 6),
            endY - 10 * Math.sin(angle + Math.PI / 6)
          );
          ctx.fillStyle = "#FF6B35";
          ctx.fill();
          ctx.restore();

          // Text Label "Target Shift"
          ctx.save();
          ctx.font = "bold 10px Noto Sans JP";
          ctx.fillStyle = "#FF6B35";
          ctx.textAlign = "center";
          ctx.fillText(
            "Target Shift",
            (startX + endX) / 2,
            (startY + endY) / 2 - 10
          );
          ctx.restore();
        },
      };

      const config = {
        type: "bubble",
        data: data,
        plugins: [arrowPlugin],
        options: {
          responsive: true,
          maintainAspectRatio: false,
          scales: {
            x: {
              min: 3000,
              max: 30000,
              title: { display: false },
              ticks: {
                callback: function (value) {
                  return "¥" + value.toLocaleString();
                },
                color: "#9ca3af",
                font: { size: 10 },
              },
              grid: { color: "#f3f4f6" },
            },
            y: {
              min: 0,
              max: 100,
              title: { display: false },
              ticks: { display: false },
              grid: { color: "#f3f4f6" },
            },
          },
          plugins: {
            legend: { display: false },
            tooltip: {
              backgroundColor: "rgba(255, 255, 255, 0.95)",
              titleColor: "#1f2937",
              bodyColor: "#4b5563",
              borderColor: "#e5e7eb",
              borderWidth: 1,
              padding: 10,
              displayColors: true,
              callbacks: {
                label: function (context) {
                  const price = context.raw.x.toLocaleString();
                  return `${context.dataset.label}: ¥${price}`;
                },
              },
            },
          },
          layout: {
            padding: 20,
          },
        },
      };

      new Chart(ctx, config);
    </script>
  </body>
</html>
